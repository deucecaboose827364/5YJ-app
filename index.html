<!--THIS IS THE WORKING DOCUMENT-->


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Photo Journal</title>
<style>
  /* --- Body & basic typography --- */
  body { 
    font-family: Arial, sans-serif; 
    background: #f0f2f5; 
    margin:0; padding:32px; 
    color:#222; 
  }
  h1 { text-align:center; margin-bottom:20px; font-size:1.8em; }

  /* --- Navigation Bar --- */
  #navContainer {
    width: 100%;
    display: flex; justify-content: center; margin-bottom: 20px;
  }
  .nav-bar {
    display: flex; justify-content: center; flex-wrap: wrap;
    gap: 10px; background: #e0e4e8;
    padding: 10px 20px; border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    max-width: fit-content;
  }
  .nav-bar button {
    padding: 8px 14px;
    border-radius: 8px;
    border: none;
    background: #2d8cff;
    color: white;
    cursor: pointer;
    font-weight: 600;
    min-width: 60px;
  }
  .nav-bar button.disabled { 
    background: #a0b0c0; cursor: not-allowed; 
  }

  /* --- Controls (date/photo input) --- */
  .controls {
    max-width:720px; margin:0 auto 24px auto; 
    display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap;
  }
  .controls input[type="date"], .controls input[type="file"] {
    padding:8px 10px; border-radius:8px; border:1px solid #ddd; background:white; width: 150px;
  }
  .controls button { 
    padding:8px 14px; border-radius:8px; border:none; background:#2d8cff; color:white; cursor:pointer; font-weight:600; 
  }

  /* --- Entries --- */
  #entries { max-width:720px; margin:0 auto; }
  .empty { text-align:center; color:#666; padding:24px; }

  /* --- Day Grid --- */
  .day-grid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(40px,1fr));
    gap:8px;
    justify-items:center;
    margin-bottom: 20px;
  }

  /* --- Photos --- */
  .photo-container {
    display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom:20px;
  }
  .photo-container img {
    width: calc(25vw - 10px); height: calc(25vw - 10px);
    max-width: 120px; max-height: 120px;
    object-fit: cover; border-radius: 8px; cursor: pointer;
  }

  /* --- Journal Textarea --- */
  textarea {
    width: 100%; max-width:720px; height:120px; margin-bottom:16px;
    padding:10px; border-radius:8px; border:1px solid #ccc;
  }

  /* --- Buttons --- */
  button { font-family:inherit; }

  /* --- Responsive tweaks for small screens --- */
  @media (max-width: 500px) {
    .nav-bar { flex-direction: column; padding: 8px; }
    .controls { flex-direction: column; gap:8px; }
    .controls input[type="date"], .controls input[type="file"] { width: 100%; }
  }

</style>
</head>
<body>

<h1>ðŸ“¸ My Photo Journal</h1>

<!-- Navigation Bar -->
<div id="navContainer"></div>

<!-- Controls -->
<div class="controls">
  <input id="dateInput" type="date" required>
  <input id="photoInput" type="file" accept="image/*" required>
  <button id="addBtn">Add Photo</button>
</div>

<div id="entries">
  <div id="emptyMsg" class="empty" style="display:none;">No photos yet. Add a photo using the controls above.</div>
</div>

<script>
let photoEntries = JSON.parse(localStorage.getItem("photoEntries")) || {};
let currentDayKey = null;
let currentView = "year";
let currentYear = null;
let currentMonth = null;

const dateInput = document.getElementById("dateInput");
const photoInput = document.getElementById("photoInput");
const addBtn = document.getElementById("addBtn");
const entriesDiv = document.getElementById("entries");
const emptyMsg = document.getElementById("emptyMsg");

// --- Storage ---
function persist() { localStorage.setItem("photoEntries", JSON.stringify(photoEntries)); }
function refreshEmptyMessage() { emptyMsg.style.display = Object.keys(photoEntries).length>0 ? "none" : "block"; }

// --- NAVIGATION BAR ---
function addNavigation(year, monthNum) {
  const navDiv = document.createElement("div");
  navDiv.className = "nav-bar";

  const backBtn = document.createElement("button");
  backBtn.textContent = "â† Back";
  backBtn.onclick = () => {
    if(currentView==="month") showYearView();
    else if(currentView==="day") showMonthView(currentYear);
    else if(currentView==="dayDetail") showDayView(currentYear, currentMonth);
  };
  if(currentView==="year") backBtn.classList.add("disabled");
  navDiv.appendChild(backBtn);

  const yearsBtn = document.createElement("button");
  yearsBtn.textContent = "Years"; yearsBtn.onclick = () => showYearView();
  navDiv.appendChild(yearsBtn);

  const monthsBtn = document.createElement("button");
  monthsBtn.textContent = "Months";
  if(year) monthsBtn.onclick = () => showMonthView(year);
  else monthsBtn.classList.add("disabled");
  navDiv.appendChild(monthsBtn);

  const daysBtn = document.createElement("button");
  daysBtn.textContent = "Days";
  if(year && monthNum) daysBtn.onclick = () => showDayView(year, monthNum);
  else daysBtn.classList.add("disabled");
  navDiv.appendChild(daysBtn);

  document.getElementById("navContainer").innerHTML = "";
  document.getElementById("navContainer").appendChild(navDiv);
}

// --- YEAR VIEW ---
function showYearView() {
  currentView="year"; currentYear=null; currentMonth=null;
  entriesDiv.innerHTML=""; addNavigation();
  const years = Object.keys(photoEntries).map(d=>d.split("-")[0])
                .filter((v,i,a)=>a.indexOf(v)===i).sort().reverse();
  if(years.length===0){ entriesDiv.innerHTML="<div class='empty'>No entries yet.</div>"; return; }
  years.forEach(year=>{
    const btn = document.createElement("button");
    btn.textContent=year;
    btn.addEventListener("click",()=>showMonthView(year));
    entriesDiv.appendChild(btn);
  });
}

// --- MONTH VIEW ---
function showMonthView(year){
  currentView="month"; currentYear=year; currentMonth=null;
  entriesDiv.innerHTML=""; addNavigation(year);
  const title=document.createElement("h2"); title.textContent=`Year: ${year}`; entriesDiv.appendChild(title);
  const monthsContainer=document.createElement("div"); monthsContainer.style.display="flex"; monthsContainer.style.flexWrap="wrap"; monthsContainer.style.justifyContent="center"; monthsContainer.style.gap="12px";
  entriesDiv.appendChild(monthsContainer);
  const months=["January","February","March","April","May","June","July","August","September","October","November","December"];
  months.forEach((monthName,index)=>{
    const monthNum=(index+1).toString().padStart(2,"0");
    const btn=document.createElement("button");
    btn.textContent=monthName;
    btn.addEventListener("click",()=>showDayView(year,monthNum));
    monthsContainer.appendChild(btn);
  });
}

// --- DAY VIEW ---
function showDayView(year,monthNum){
  currentView="day"; currentYear=year; currentMonth=monthNum;
  entriesDiv.innerHTML=""; addNavigation(year,monthNum);
  const monthName=new Date(year,parseInt(monthNum)-1).toLocaleString('default',{month:'long'});
  const title=document.createElement("h2"); title.textContent=`${monthName} ${year}`; entriesDiv.appendChild(title);

  const daysContainer=document.createElement("div"); daysContainer.className="day-grid"; entriesDiv.appendChild(daysContainer);
  const daysInMonth=new Date(year,parseInt(monthNum),0).getDate();
  for(let day=1;day<=daysInMonth;day++){
    const dayStr=day.toString().padStart(2,"0");
    const btn=document.createElement("button"); btn.textContent=day;
    const key=`${year}-${monthNum}-${dayStr}`;
    if(photoEntries[key] && photoEntries[key].photos && photoEntries[key].photos.length>0){ 
        btn.style.backgroundColor="#2d8cff"; btn.style.color="white"; 
    }
    btn.addEventListener("click",()=>showDayDetail(year,monthNum,dayStr));
    daysContainer.appendChild(btn);
  }
}

// --- DAY DETAIL ---
function showDayDetail(year,monthNum,dayNum){
  currentView="dayDetail"; currentYear=year; currentMonth=monthNum; currentDayKey=`${year}-${monthNum.padStart(2,'0')}-${dayNum.padStart(2,'0')}`;
  entriesDiv.innerHTML=""; addNavigation(year,monthNum);
  
  const date=new Date(year,parseInt(monthNum)-1,dayNum);
  const title=document.createElement("h2"); title.textContent=date.toDateString(); entriesDiv.appendChild(title);

  const photosDiv=document.createElement("div"); photosDiv.className="photo-container"; entriesDiv.appendChild(photosDiv);
  const journalArea=document.createElement("textarea"); journalArea.placeholder="Write your journal entry here..."; 
  journalArea.value=(photoEntries[currentDayKey] && photoEntries[currentDayKey].journal)||""; entriesDiv.appendChild(journalArea);

  const saveBtn=document.createElement("button"); saveBtn.textContent="Save Journal"; saveBtn.addEventListener("click",()=>{
    if(!photoEntries[currentDayKey]) photoEntries[currentDayKey]={photos:[],journal:""};
    photoEntries[currentDayKey].journal=journalArea.value; persist(); alert("Journal saved!");
  }); entriesDiv.appendChild(saveBtn);

  const photos=(photoEntries[currentDayKey] && photoEntries[currentDayKey].photos)||[];
  photos.forEach(src=>{
    const img=document.createElement("img"); img.src=src;
    img.addEventListener("click",()=>{
      if(!confirm("Delete this photo?")) return;
      photoEntries[currentDayKey].photos=photoEntries[currentDayKey].photos.filter(p=>p!==src);
      if(photoEntries[currentDayKey].photos.length===0 && !photoEntries[currentDayKey].journal) delete photoEntries[currentDayKey];
      persist(); showDayDetail(year,monthNum,dayNum);
    }); photosDiv.appendChild(img);
  });
}

// --- ADD PHOTO ---
addBtn.addEventListener("click", e => {
  e.preventDefault();
  if(!currentDayKey){ alert("Select a day first."); return; }
  const file = photoInput.files[0]; if(!file){ alert("Select an image."); return; }
  const reader = new FileReader();
  reader.onload = ev => {
    const dataUrl = ev.target.result;
    if(!photoEntries[currentDayKey]) photoEntries[currentDayKey]={photos:[],journal:""};
    photoEntries[currentDayKey].photos.push(dataUrl);
    persist();
    const [year, month, day] = currentDayKey.split("-");
    showDayDetail(year, month, day);
    photoInput.value="";
  };
  reader.readAsDataURL(file);
});

// --- INIT ---
refreshEmptyMessage(); showYearView();
</script>
</body>
</html>

